We're proud to announce the new feature release of darktable, 4.8.0!

The github release is here: [https://github.com/darktable-org/darktable/releases/tag/release-4.8.0](https://github.com/darktable-org/darktable/releases/tag/release-4.8.0).

As always, please don't use the autogenerated tarball provided by
github, but only our tar.xz file. The checksums are:

```
$ sha256sum darktable-4.8.0.tar.xz
??? darktable-4.8.0.tar.xz
$ sha256sum darktable-4.8.0-x86_64.dmg
??? darktable-4.8.0-x86_64.dmg
$ sha256sum darktable-4.8.0-arm64.dmg
??? darktable-4.8.0-arm64.dmg
$ sha256sum darktable-4.8.0-win64.exe
??? darktable-4.8.0.exe
```

When updating from the stable 4.6 series, please bear in
mind that your edits will be preserved during this process, but the new
library and configuration will no longer be usable with 4.6.

You are strongly advised to take a backup first.

#### Important note: to make sure that darktable can keep on supporting the raw file format for your camera, *please* read [this post](https://discuss.pixls.us/t/raw-samples-wanted/5420?u=lebedevri) on how/what raw samples you can contribute to ensure that we have the *full* raw sample set for your camera under CC0 license!

Since darktable 4.4:

- ??? commits to darktable+rawspeed
- ??? pull requests handled
- ??? issues closed


_Please note that the darktable documentation is not currently complete for release 4.8
and contributions are greatly appreciated. Please see the
[project documentation](https://github.com/darktable-org/dtdocs#contributing)
for more information on how to contribute._

## The Big Ones

The following is a summary of the main features added to darktable
4.8. Please see the user manual for more details of the individual
changes (where available).

- Two new modules have been introduced to support images composition.

  - Enlarge Canvas : As the name imply this module can be used to add
    areas on the left, right, top or bottom of the image. The new area
    can be assigned different color to help masking if necessary. The
    new areas can the be filled with the Retouch module by copying
    some other part of the image, using Liquify if the area is small
    or the new module overlay.

  - Overlay : This module can be used to add new content on the image
    by overlaying pixels from the current image or another image. The
    overlay content is defined by a drag-and-drop from the filmstrip
    to the Overlay module. This new content can be scaled, rotated and
    shifted horizontally or vertically. Using a mask it can be used to
    fill an area created by the Enlarge Canvas or to add some new part
    into the image using masking. A common example is to overlay
    multiply pictures of a firework to create a bigger one.

- Implemented a toggle switch for the darkroom mode forcing the
  pixel-pipe processing to use the whole image data instead of just the
  area displayed. This allows the user to inspect processed data
  without errors introduced via internal scaling and equals what we
  get by exporting in "high quality resampling" mode.

## Performance Improvements

## Other Changes

- Changed the sort order of tags to a natural and case insensitive order.

- Added Apple Keychain password storage backend for macOS devices.

- Collect module sorting has been integrated into the module's header
  instead of a preference. All collections can now be sorted easily by
  a single click on the sort button.

- Removed "unrestricted" mode from darktable's preferences resources
  for safety. This setting has been proved to be unsafe in many
  cases. It can still be enabled via the resource file if needed.

- Add buttons next to the snapshots to allow restoring it as the new
  history. Also the snapshots are now supporting drawn masks. It is
  possible to visualize the difference between the main darkroom view
  and a snapshot with different masking for example.

- Using <kbd>Right-Click</kbd> on color label icons (bottom toolbar of
  lighttable) it is possible to add a description to color
  labels. This is an handy way of remembering the color label usage in
  the workflow.

- Removed the AI options in color calibration module because of
  mediocre quality.

- It is now possible to import in-place pictures in a gvfs mount on
  GNU/Linux.

- Add a dashed outline of the current selected area in the print view.

- Added a few more EXIF fields to the image information module: White
  balance, exposure program, flash and metering mode.  These get
  filled automatically for new imports. For existing photos please
  perform a "refresh EXIF" on the selected images.

## Bug Fixes

- Fix copy of multiple instances to ensure the proper order is applied
  when pasting to a new image.

- Fixing raw chromatic aberration on clang based systems.

- Fixes backthumb crawler for deleted history. We make sure that the
  crawler is aware of a deleted history and so will regenerate the
  thumbs as expected.

- Fix drawn masks visualizing in darkroom after pixelpipe module have
  changed. The drawn masks will now be properly adjusted if there is
  new distortion on the pipe for example. This was not the case until
  one was editing the mask.

## Lua

### API Version

- API version is now 9.2.0

### Bug Fixes

- Fixed `scripts_installer` to handle user names with spaces on Windows.

- Fixed a wrong behaviour when double-clicking on the navigation menu
  in the map module.

### Add action support for Lua


### Other Lua changes

- Allow access to image `change_timestamp`.

## Notes

- When exporting to AVIF, EXR, JPEG XL, or XCF, selecting specific
  metadata (e.g. geo-tag or creator) is not currently possible. For
  AVIF, EXR, JPEG XL, and XCF formats, darktable will not include any
  metadata fields unless the user selects all of the checkboxes in the
  export module's preference options.

- In order to support the correct display of numbers in darktable, the
  minimum supported Gtk version has had to be increased to
  3.24.15. For people who need to build darktable with an older
  version, this can be achieved by removing line 241 of the
  `darktable.css` file on your system. See
  https://github.com/darktable-org/darktable/issues/13166.

- Starting with release 4.4 a new support policy regarding macOS
  versions has been put in place â€“ darktable releases will now only
  support those macOS versions that are also supported by Apple.
  Release 4.6 therefore drops support for macOS versions older than
  12.5.

## Changed Dependencies

### Mandatory

- n/a

### Optional

- n/a

## RawSpeed changes


## Camera support, compared to 4.6

### Base Support

- Canon EOS R6 Mark II (requires LibRaw 202403 and later)
- Canon EOS R8 (requires LibRaw 202403 and later)
- Canon EOS R50 (requires LibRaw 202403 and later)
- Canon EOS R100 (requires LibRaw 202403 and later)

### White Balance Presets

- ???

### Noise Profiles

- ???

### Missing Compression Mode Support

- Adobe enhanced DNGs (JPEG XL flavor)
- Apple ProRAW DNGs
- CinemaDNG lossless (Blackmagic, some DJI, etc.)
- Fujifilm lossy RAFs
- Nikon high efficiency NEFs
- Samsung Expert RAW DNGs (JPEG XL flavor)
- Sony downsized lossless ARWs ("M" for full-frame, "S" for full-frame & APS-C)

### Suspended Support

Support for the following cameras is suspended because no samples
are available on raw.pixls.us:

- Creo/Leaf Aptus 22(LF3779)/Hasselblad H1
- Fujifilm FinePix S9600fd
- Fujifilm IS-1
- GoPro FUSION
- Kodak EasyShare Z980
- Leaf Aptus-II 5(LI300059)/Mamiya 645 AFD
- Leaf Credo 60
- Leaf Credo 80
- Minolta DiMAGE 5
- Olympus SP320
- Panasonic DMC-FX150
- Phase One IQ250
- Sinar Hy6/ Sinarback eXact
- ST Micro STV680

## Translations

- ???
